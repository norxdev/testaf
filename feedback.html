<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css?v=2">

  <link rel="icon" href="faviconAF-v2.png" type="image/png">
  <link rel="apple-touch-icon" href="faviconAF-v2.png">

  <title>Armour Flipper | Feedback</title>
</head>
<body>
  <!-- Header -->
  <header class="sticky-header">
    <div class="header-left">
      <div class="site-title" style="cursor:pointer;" onclick="window.location.href='index.html';">
        <img src="faviconAF-v2.png" alt="AF Icon" class="title-icon">
        Armour Flipper
      </div>
    </div>
    <div class="header-right">
      <a class="donate-btn-header" href="https://www.paypal.com/donate/?hosted_button_id=YVZNTWZP8JUCC" target="_blank">Donate</a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="set-wrapper" style="max-width:600px; width:100%;">
      <h2 style="text-align:center; margin-bottom:20px;">Feedback</h2>

      <form id="feedbackForm" class="feedback-form" style="display:flex; flex-direction:column; gap:12px;">
        <label for="category">Category:</label>
        <select id="category" name="subject" required class="piece-name" style="padding:8px; border-radius:6px; border:1px solid var(--border-dark); background-color: var(--bg-darker); color: var(--text-light);">
          <option value="">Select...</option>
          <option value="general">General Feedback</option>
          <option value="bug">Report a Bug</option>
          <option value="suggestion">Feature Suggestion</option>
          <option value="other">Other</option>
        </select>

        <label for="message">Message:</label>
        <textarea id="message" name="message" placeholder="Type your message" required
          style="padding:8px; border-radius:6px; border:1px solid var(--border-dark); background-color: var(--bg-darker); color: var(--text-light); min-height:120px;"></textarea>

        <button type="submit" class="donate-btn-header" style="align-self:flex-start;">Submit Feedback</button>
        <a href="index.html" class="donate-btn-header" style="align-self:flex-start; margin-top:4px;">Go Back</a>

        <p id="successMessage" style="color: var(--accent); display:none; margin-top:12px;">
          Thank you! Your feedback has been submitted.
        </p>
        <p id="errorMessage" style="color: #ff3d00; display:none; margin-top:12px;">
          Error submitting feedback. Please try again.
        </p>
      </form>
    </div>
  </main>

  <!-- Footer -->
  <footer id="pageFooter" style="text-align:center; padding:10px; font-size:0.9rem; color:#888; margin-top:20px;">
    &copy; <span id="currentYear"></span> Armour Flipper. Created by Norxdev.
  </footer>

  <script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    const form = document.getElementById('feedbackForm');
    const submitBtn = form.querySelector('button[type="submit"]');
    const successMsg = document.getElementById('successMessage');
    const errorMsg = document.getElementById('errorMessage');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      submitBtn.disabled = true;
      submitBtn.textContent = "Submitting...";
      successMsg.style.display = 'none';
      errorMsg.style.display = 'none';

      const formData = new FormData(form);

      try {
        const response = await fetch('https://formbold.com/s/3K4Z0', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          form.querySelectorAll('label, select, textarea, button').forEach(el => el.remove());
          successMsg.style.display = 'block';
        } else {
          errorMsg.style.display = 'block';
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Feedback";
        }
      } catch(err){
        errorMsg.style.display = 'block';
        submitBtn.disabled = false;
        submitBtn.textContent = "Submit Feedback";
      }
    });
  </script>
</body>
</html>
